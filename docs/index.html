<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>P-09</title><meta name="description" content="Documentation for P-09"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">P-09</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> P-09 </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#práctica-9-aplicación-de-procesamiento-de-notas-de-texto" id="práctica-9-aplicación-de-procesamiento-de-notas-de-texto" style="color: inherit; text-decoration: none;">
  <h1>Práctica 9: Aplicación de procesamiento de notas de texto</h1>
</a>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-Yeixon98/actions/workflows/tests.yml"><img src="https://img.shields.io/badge/Tests-passing-2aaf49?logo=github&labelColor=343b43&logoColor=959da5" alt="Tests"></a>
<a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-Yeixon98?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2122/ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-Yeixon98/badge.svg?branch=main" alt="Coverage Status"></a>
<a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2122_ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-Yeixon98"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2122_ull-esit-inf-dsi-21-22-prct09-filesystem-notes-app-Yeixon98&metric=alert_status" alt="Quality Gate Status"></a></p>
<hr>

<a href="#indice" id="indice" style="color: inherit; text-decoration: none;">
  <h2>Indice</h2>
</a>
<ol>
<li><a href="#Object">Objetivos</a></li>
<li><a href="#Tools">Herramientas</a><ul>
<li><a href="#TypeDoc">Typedoc</a></li>
<li><a href="#Test">Mocha y Chai</a></li>
<li><a href="#Quality">Instanbul y Coveralls</a></li>
<li><a href="#Sonar">SonarCloud</a></li>
<li><a href="#Actions">Github Actions</a></li>
</ul>
</li>
<li><a href="#dev">Aplicación</a></li>
</ol>
<hr>

<a href="#1-objetivos-" id="1-objetivos-" style="color: inherit; text-decoration: none;">
  <h3>1. Objetivos <a name="Object"></a></h3>
</a>
<hr>

<a href="#2-herramientas-" id="2-herramientas-" style="color: inherit; text-decoration: none;">
  <h3>2. Herramientas <a name="Tools"></a></h3>
</a>
<p>En esta practica se nos pedia usar herramientas como TypeDoc, Mocha, Chai, Instanbul, Coveralls, Sonarcloud y Github Actions.</p>

<a href="#21-typedoc-" id="21-typedoc-" style="color: inherit; text-decoration: none;">
  <h3>2.1. TypeDoc <a name="TypeDoc"></a></h3>
</a>
<p>TypeDoc es una herramienta que nos permitirá documentar nuestro código a través de comentarios escrito en el mismo, esta herramienta genera una página web con toda esta información.</p>
<p>Para llevar a cabo la instalación de la misma, seguimos los pasos que vemos en este <a href="https://drive.google.com/file/d/19LLLCuWg7u0TjjKz9q8ZhOXgbrKtPUme/view">video</a> hecho por el profesor.</p>

<a href="#22-mocha-y-chai-" id="22-mocha-y-chai-" style="color: inherit; text-decoration: none;">
  <h3>2.2. Mocha y Chai <a name="Test"></a></h3>
</a>
<p>Mocha y Chai son unos framework que nos permiten realizar test a nuestro código escrito en TypeScript.</p>
<p>Para llevar a cabo la instalación de ambos, seguimos los pasos que vemos en este <a href="https://drive.google.com/file/d/1-z1oNOZP70WBDyhaaUijjHvFtqd6eAmJ/view">video</a> hecho por el profesor.</p>

<a href="#23-instanbul-y-coveralls" id="23-instanbul-y-coveralls" style="color: inherit; text-decoration: none;">
  <h3>2.3. Instanbul y Coveralls<a name="Quality"></a></h3>
</a>
<p>Instanbul y Coveralls son dos herramientas que nos permiten saber que cantidad de codigo se esta ejecutando, segun los test realizados, a traves de unos informes que se generan con Instanbul y son enviados a <a href="https://coveralls.io/">Coveralls</a> generando asi un informe.</p>
<p>Para llevar a cabo la instalación de ambos, seguimos los pasos que vemos en este <a href="https://drive.google.com/file/d/1xLDc4CpoYpsAlCFO_4DMwu7MKCtcZDnh/view">video</a> hecho por el profesor.</p>

<a href="#24-sonarcloud-" id="24-sonarcloud-" style="color: inherit; text-decoration: none;">
  <h3>2.4. SonarCloud <a name="Sonar"></a></h3>
</a>
<p>Sonarcloud es una herramienta que nos permite ver la calidad del código, por ejemplo si tenemos partes de código duplicado, fracciones de códigos que no estén bien utilizadas (Code Smell).</p>
<p>Esta herramienta junto a Coveralls, nos brinda otra opción de cubrimiento de código más avanzado.</p>

<a href="#25-github-actions-" id="25-github-actions-" style="color: inherit; text-decoration: none;">
  <h3>2.5. Github Actions <a name="Actions"></a></h3>
</a>
<p>Github Actions es una herramineta que nos permite llevar acabo la automatizaciond e tareas, como puede ser la ejecucion del los tests, coveralls y sonarcloud.</p>
<p>Para llevar a cabo la instalación, seguimos los pasos que vemos en este <a href="https://drive.google.com/file/d/1hwtPovQlGvthaE7e7yYshC4v8rOtLSw0/view">video</a> hecho por el profesor.</p>
<hr>

<a href="#3-aplicación-" id="3-aplicación-" style="color: inherit; text-decoration: none;">
  <h3>3. Aplicación <a name="dev"></a></h3>
</a>
<p>Lo primero que se desarrollo para esta practica fue la clase <code>Note</code> que representaria una nota, esta clase no consta con gran cosa. Un constructor muy sencillo que recibe el titulo de la nota, su contenido y el color que se quiera representar; ademas de esto tiene los getters correspondientes para obtener los valores privados.</p>
<pre><code class="language-ts"><span class="hl-0">constructor</span><span class="hl-1">(</span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">title</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">, </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">body</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">, </span><span class="hl-2">private</span><span class="hl-1"> </span><span class="hl-2">color</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">) {}</span>
</code></pre>
<p>Una cosa importante en esta clase es el método print, que nos permite escribir la nota como un JSON.</p>
<pre><code class="language-ts"><span class="hl-0">print</span><span class="hl-1">(): </span><span class="hl-2">string</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">&#39;{</span><span class="hl-5">\n\&quot;</span><span class="hl-4">title</span><span class="hl-5">\&quot;</span><span class="hl-4">: </span><span class="hl-5">\&quot;</span><span class="hl-4">&#39;</span><span class="hl-1"> + </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">title</span><span class="hl-1"> +</span><br/><span class="hl-1">    </span><span class="hl-4">&#39;</span><span class="hl-5">\&quot;</span><span class="hl-4">,</span><span class="hl-5">\n\&quot;</span><span class="hl-4">body</span><span class="hl-5">\&quot;</span><span class="hl-4">: </span><span class="hl-5">\&quot;</span><span class="hl-4">&#39;</span><span class="hl-1"> + </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">body</span><span class="hl-1"> +</span><br/><span class="hl-1">    </span><span class="hl-4">&#39;</span><span class="hl-5">\&quot;</span><span class="hl-4">,</span><span class="hl-5">\n\&quot;</span><span class="hl-4">color</span><span class="hl-5">\&quot;</span><span class="hl-4">: </span><span class="hl-5">\&quot;</span><span class="hl-4">&#39;</span><span class="hl-1"> + </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">color</span><span class="hl-1"> + </span><span class="hl-4">&#39;</span><span class="hl-5">\&quot;\n</span><span class="hl-4">}&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Esto es usado apra poder guardar la nota en los ficheros .json, que de esto se encarga la siguiente clase.</p>
<p>La clase <code>NoteManager</code> es el que permite manipular las notas guardadas. Esta clase consta con distintos métodos, los cuales nos pedian en el guion de la practica y uno extra.</p>
<p><b><u>addNote</u></b>: Este método se encarga de guardar la información de la nota.</p>
<p>Para esto, lo primero que hacemos, es comprobar si existe la carpeta del usuario que a creado la nota, en caso que no este dicha carpeta, la creamos.</p>
<pre><code class="language-ts"><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">existsSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">`</span><span class="hl-1">)) {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">`</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4"> directory will be created`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">mkdirSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">`</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-2">recursive:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">}</span>
</code></pre>
<p>A continuacion, tomamos los datos de la nota para guardarlos, comprobando previamente que el titulo de la nota, no exista antes.</p>
<pre><code class="language-ts"><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">existsSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">/</span><span class="hl-6">${</span><span class="hl-2">title</span><span class="hl-6">}</span><span class="hl-4">.json`</span><span class="hl-1">)) {</span><br/><span class="hl-1">  </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">writeFileSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">/</span><span class="hl-6">${</span><span class="hl-2">title</span><span class="hl-6">}</span><span class="hl-4">.json`</span><span class="hl-1">, </span><span class="hl-2">note</span><span class="hl-1">.</span><span class="hl-0">print</span><span class="hl-1">());</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-4">&quot;New note added!&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">;</span><br/><span class="hl-1">} </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-4">&quot;Note title taken!&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p><b><u>removeNote</u></b>: Este método se encarga de borrar una nota de un usuario.</p>
<pre><code class="language-ts"><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">existsSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">/</span><span class="hl-6">${</span><span class="hl-2">title</span><span class="hl-6">}</span><span class="hl-4">.json`</span><span class="hl-1">)) {</span><br/><span class="hl-1">  </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">rmSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">/</span><span class="hl-6">${</span><span class="hl-2">title</span><span class="hl-6">}</span><span class="hl-4">.json`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-4">&quot;Note removed!&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">;</span><br/><span class="hl-1">} </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-4">&quot;Note not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Para ello, basta con comprobar que exista esa nota y borrarla.</p>
<p><b><u>modifyNote</u></b>: Modifica una nota existente, para ello, comprobamos que exista la nota a modificar, y sobre escribe la nota, es una mezcla entre eliminar y crear.</p>
<pre><code class="language-ts"><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">existsSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">/</span><span class="hl-6">${</span><span class="hl-2">title</span><span class="hl-6">}</span><span class="hl-4">.json`</span><span class="hl-1">)) {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">note</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Note</span><span class="hl-1">(</span><span class="hl-2">title</span><span class="hl-1">, </span><span class="hl-2">body</span><span class="hl-1">, </span><span class="hl-2">color</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">writeFileSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">/</span><span class="hl-6">${</span><span class="hl-2">title</span><span class="hl-6">}</span><span class="hl-4">.json`</span><span class="hl-1">, </span><span class="hl-2">note</span><span class="hl-1">.</span><span class="hl-0">print</span><span class="hl-1">());</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">green</span><span class="hl-1">(</span><span class="hl-4">&quot;Modified note!&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">;</span><br/><span class="hl-1">} </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-4">&quot;Note not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p><b><u>listNotes</u></b>: Este método muestra los titulos de las notas en el color correspondiente a las notas, graicas al uso del modulo <code>chalk</code>, en caso que el color introducido, no sea uno de los permitidos, se pondra de color cyan.</p>
<p>Para ello, lo que hacemos es buscar si existe la carpeta de notas del usuario y si tiene alguna nota.</p>
<pre><code class="language-ts"><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">existsSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">`</span><span class="hl-1">) &amp;&amp; </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">readdirSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">`</span><span class="hl-1">).</span><span class="hl-2">length</span><span class="hl-1"> &gt;= </span><span class="hl-8">0</span><span class="hl-1"> ) { </span><br/><span class="hl-1">  ...</span><br/><span class="hl-1">}</span><br/><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-4">&quot;User not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Una vez sabemos que existe el usuario y tiene notas, lo que hacemos es ir recorriendo todos los titulos que estan dentro de la carpeta del usuario, y obteniendo a su ves la informacion de cada nota, parseandola, gracias a la forma de guardarla. Para luego mostrarlas en consola con los colores correspondientes.</p>
<pre><code class="language-ts"><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">readdirSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">`</span><span class="hl-1">).</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-2">notes</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">contentNote</span><span class="hl-1"> = </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">readFileSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">/</span><span class="hl-6">${</span><span class="hl-2">notes</span><span class="hl-6">}</span><span class="hl-4">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">JSONote</span><span class="hl-1"> = </span><span class="hl-9">JSON</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-2">contentNote</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">());</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">note</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Note</span><span class="hl-1">(</span><span class="hl-2">JSONote</span><span class="hl-1">.</span><span class="hl-2">title</span><span class="hl-1">, </span><span class="hl-2">JSONote</span><span class="hl-1">.</span><span class="hl-2">body</span><span class="hl-1">, </span><span class="hl-2">JSONote</span><span class="hl-1">.</span><span class="hl-2">color</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">keyword</span><span class="hl-1">(</span><span class="hl-2">note</span><span class="hl-1">.</span><span class="hl-0">getColor</span><span class="hl-1">())(</span><span class="hl-2">note</span><span class="hl-1">.</span><span class="hl-0">getTitle</span><span class="hl-1">()));</span><br/><span class="hl-1">  } </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-2">_</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">cyan</span><span class="hl-1">(</span><span class="hl-2">note</span><span class="hl-1">.</span><span class="hl-0">getTitle</span><span class="hl-1">()));</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code></pre>
<p><b><u>readNote</u></b>: Este método permite ver el contenido de una nota entera, osea titulo y cuerpo.</p>
<p>Para ello buscamos si existe el titulo de la nota del usuario que realiza la consulta.</p>
<pre><code class="language-ts"><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">existsSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">/</span><span class="hl-6">${</span><span class="hl-2">title</span><span class="hl-6">}</span><span class="hl-4">.json`</span><span class="hl-1">)) {</span><br/><span class="hl-1">  ...</span><br/><span class="hl-1">} </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-4">&quot;Note not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span>
</code></pre>
<p>Si encontramos la nota, obtenemos la informacion parseandola y mostrandole al usuario su contenido, con el color de la nota, en caso de que el color no sea valido, se pondra de color cyan.</p>
<pre><code class="language-ts"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">contentNote</span><span class="hl-1"> = </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">readFileSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">/</span><span class="hl-6">${</span><span class="hl-2">title</span><span class="hl-6">}</span><span class="hl-4">.json`</span><span class="hl-1">);</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">JSONote</span><span class="hl-1"> = </span><span class="hl-9">JSON</span><span class="hl-1">.</span><span class="hl-0">parse</span><span class="hl-1">(</span><span class="hl-2">contentNote</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">());</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">note</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Note</span><span class="hl-1">(</span><span class="hl-2">JSONote</span><span class="hl-1">.</span><span class="hl-2">title</span><span class="hl-1">, </span><span class="hl-2">JSONote</span><span class="hl-1">.</span><span class="hl-2">body</span><span class="hl-1">, </span><span class="hl-2">JSONote</span><span class="hl-1">.</span><span class="hl-2">color</span><span class="hl-1">);</span><br/><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">keyword</span><span class="hl-1">(</span><span class="hl-2">note</span><span class="hl-1">.</span><span class="hl-0">getColor</span><span class="hl-1">())(</span><span class="hl-2">note</span><span class="hl-1">.</span><span class="hl-0">getTitle</span><span class="hl-1">()));</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">keyword</span><span class="hl-1">(</span><span class="hl-2">note</span><span class="hl-1">.</span><span class="hl-0">getColor</span><span class="hl-1">())(</span><span class="hl-2">note</span><span class="hl-1">.</span><span class="hl-0">getBody</span><span class="hl-1">()));</span><br/><span class="hl-1">} </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-2">_</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">cyan</span><span class="hl-1">(</span><span class="hl-2">note</span><span class="hl-1">.</span><span class="hl-0">getTitle</span><span class="hl-1">()));</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">cyan</span><span class="hl-1">(</span><span class="hl-2">note</span><span class="hl-1">.</span><span class="hl-0">getBody</span><span class="hl-1">()));</span><br/><span class="hl-1">}</span><br/><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">;</span>
</code></pre>
<blockquote>
<p>Un dato a destacar, cuando se lee un fichero haciendo uso del fileSystem, la información entra en un buffer y para hacerla legible hay que usar el método <code>toString()</code></p>
</blockquote>
<p><b><u>clearDataUser</u></b>: Elimina toda la informacion de ese usuario. Para ello simplemente busamos la carpeta de notas del usuario y hacemos un borrado recursivo.</p>
<pre><code class="language-ts"><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">existsSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">`</span><span class="hl-1">)) </span><br/><span class="hl-1">  </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-0">rmSync</span><span class="hl-1">(</span><span class="hl-4">`database/</span><span class="hl-6">${</span><span class="hl-2">user</span><span class="hl-6">}</span><span class="hl-4">`</span><span class="hl-1">, { </span><span class="hl-2">recursive:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> });</span>
</code></pre>
<p>Por ultimo el fichero que nos permitira ejecutar este programa desde la terminal, mandandole distintos argumentos para realizar todas estas acciones, esto se debe al uso del modulo yargs que nos permite leer losr argumentos que le pasamos a la hora de ejecutar un archivo y realizar ciertas funcionalidades.</p>
<p>Para esto, se define una estructura que varia muy poco, dependiendo de la cnatidad de argumentos que necesitemos, pero la mayoria son iguales en todos los casos, por eso explicare la mas compleja.</p>
<p>El añadir una nota desde la consola, supone la ejecucion del fichero <code>command</code> con ciertos parametros, estos parametros, los recoge el modulo yargs y dependiendo de si estan en el codigo del programa ejecuta una parte u otra, en el caso este, el de añadir, ejecutaria este fragmento de codigo.</p>
<pre><code class="language-ts"><span class="hl-2">yargs</span><span class="hl-1">.</span><span class="hl-0">command</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">command:</span><span class="hl-1"> </span><span class="hl-4">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">describe:</span><span class="hl-1"> </span><span class="hl-4">&#39;Add a new note&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">builder:</span><span class="hl-1"> {</span><br/><span class="hl-1">    ...</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">handler</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">) {</span><br/><span class="hl-1">    ...</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code></pre>
<p>Los sub-argumentos se expecifican dentro del <em>builder</em>, en este caso serian necesarios todos los argumentos.</p>
<pre><code class="language-ts"><span class="hl-10">user</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-10">describe</span><span class="hl-1">: </span><span class="hl-4">&#39;User name&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">demandOption</span><span class="hl-1">: </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">type</span><span class="hl-1">: </span><span class="hl-4">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">},</span><br/><span class="hl-10">title</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-10">describe</span><span class="hl-1">: </span><span class="hl-4">&#39;Note title&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">demandOption</span><span class="hl-1">: </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">type</span><span class="hl-1">: </span><span class="hl-4">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">},</span><br/><span class="hl-10">body</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-10">describe</span><span class="hl-1">: </span><span class="hl-4">&#39;Note body&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">demandOption</span><span class="hl-1">: </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">type</span><span class="hl-1">: </span><span class="hl-4">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">},</span><br/><span class="hl-10">color</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-10">describe</span><span class="hl-1">: </span><span class="hl-4">&#39;Note color&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">demandOption</span><span class="hl-1">: </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">type</span><span class="hl-1">: </span><span class="hl-4">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">},</span>
</code></pre>
<p>Cuando se ejecuta el fragmento del añadir al finalizar la obtencion de los argumentos y sub-argumentos, se ejecuta una función que se encuentra dentro del <em>handler</em>, que es la que realmente lleva a acabo la acción.</p>
<blockquote>
<p>Un dato a mencionar, para manejar los argumentos de forma correcta tiene que haber una comprobacion previa, que sean de tipo string o el tipo que se desee.</p>
</blockquote>
<pre><code class="language-ts"><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-6">typeof</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">user</span><span class="hl-1"> === </span><span class="hl-4">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-6">typeof</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">title</span><span class="hl-1"> === </span><span class="hl-4">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-6">typeof</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">body</span><span class="hl-1"> === </span><span class="hl-4">&#39;string&#39;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-6">typeof</span><span class="hl-1"> </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">color</span><span class="hl-1"> === </span><span class="hl-4">&quot;string&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">  ... </span><span class="hl-11">// Accion a realizar</span><br/><span class="hl-1">} </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-0">red</span><span class="hl-1">(</span><span class="hl-4">&#39;Argument invalid&#39;</span><span class="hl-1">));</span><br/><span class="hl-1">}</span>
</code></pre>
<p>El resto de argumentos como el remove, modify, list, read, siguen la misma filosofia, solo que se usan menos sub-argumentos y otras acciones.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/note.html">note</a></li><li class=" tsd-kind-module"><a href="modules/noteManager.html">note<wbr/>Manager</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>